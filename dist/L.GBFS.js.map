{"version":3,"file":"L.GBFS.js","sources":["../src/L.GBFS.js"],"sourcesContent":["import './L.GBFS.css';\n\nimport {\n  Layer, GeoJSON, Marker, Icon, DivIcon, LatLng, setOptions,\n} from 'leaflet';\n\n// const iconUrl = require('./images/bike_icon.png');\nconst iconUrl = new URL('./images/bike_icon.png', document.currentScript.src);\n\nconst GBFS = Layer.extend({\n  options: {\n    gbfsURL: '',\n    gbfsFiles: null,\n    language: null,\n    start: true,\n    interval: 60 * 1000,\n    onlyRunWhenAdded: false,\n    bikeMarkerColor: 'white',\n    bikeMarkerBgColor: 'silver',\n    stationMarkerBgColor: '#8C2BF2',\n    showStationPopup: true,\n    showBikePopup: true,\n  },\n\n  initialize(options) {\n    setOptions(this, options);\n    this.container = new GeoJSON(null, options);\n    this.updating = false;\n\n    if (this.options.start && !this.options.onlyRunWhenAdded) {\n      this.start();\n    }\n  },\n\n  async start() {\n    if (this.feeds) { // already started\n      return this;\n    }\n    if (this.options.gbfsFiles) {\n      this.stations = {};\n      this.feeds = {};\n      for (const f of this.options.gbfsFiles) {\n        if (f.name === 'station_information.json') {\n          this.feeds.stationInformation = f;\n        } else if (f.name === 'station_status.json') {\n          this.feeds.stationStatus = f;\n        } else if (f.name === 'system_information.json') {\n          // eslint-disable-next-line no-await-in-loop\n          const systemInfoText = await f.text();\n          this.systemInformation = JSON.parse(systemInfoText);\n        }\n      }\n      this.update();\n      return this;\n    }\n    try {\n      const gbfsResponse = await fetch(this.options.gbfsURL);\n      const gbfs = await gbfsResponse.json();\n      if (this.options.language) {\n        if (!Object.prototype.hasOwnProperty.call(gbfs.data, this.options.language)) {\n          throw new Error(`defined language (${this.options.language}) missing in gbfs file`);\n        }\n      } else {\n        const languages = Object.keys(gbfs.data);\n        if (languages.length === 0) {\n          throw new Error('GBFS has no languages defined');\n        } else {\n          this.options.language = languages[0];\n        }\n      }\n\n      const feeds = gbfs.data[this.options.language].feeds;\n      const systemInformation = feeds.find((el) => el.name === 'system_information');\n      const systemInfoResponse = await fetch(systemInformation.url);\n      this.systemInformation = await systemInfoResponse.json();\n\n      const stationInformation = feeds.find((el) => el.name === 'station_information');\n      const stationStatus = feeds.find((el) => el.name === 'station_status');\n      const freeBikeStatus = feeds.find((el) => el.name === 'free_bike_status');\n      // const vehicleTypes = feeds.find((el) => el.name === 'vehicle_types');\n\n      this.feeds = {\n        stationInformation, stationStatus, freeBikeStatus, // vehicleTypes,\n      };\n      this.stations = {};\n\n      if (!this.timer && this.options.interval > 0) {\n        this.timer = setInterval(() => this.update(), this.options.interval);\n        this.update();\n      }\n    } catch (err) {\n      console.warn(err);\n      this.fire('error', { error: err });\n    }\n\n    return this;\n  },\n\n  stop() {\n    if (this.timer) {\n      clearTimeout(this.timer);\n      delete this.timer;\n    }\n\n    return this;\n  },\n\n  isRunning() {\n    return this.timer !== undefined;\n  },\n\n  isUpdating() {\n    return this.updating;\n  },\n\n  async update() {\n    if (typeof this.feeds === 'undefined') {\n      return this;\n    }\n    try {\n      this.updating = true;\n      let stationStatus;\n      let stations;\n      if (typeof this.feeds.stationStatus.url === 'string') {\n        const stationStatusResponse = await fetch(this.feeds.stationStatus.url);\n        stationStatus = await stationStatusResponse.json();\n      } else {\n        const stationStatusText = await this.feeds.stationStatus.text();\n        stationStatus = JSON.parse(stationStatusText);\n      }\n      let freeBikeStatus;\n      if (typeof this.feeds.freeBikeStatus !== 'undefined') {\n        const freeBikeStatusResponse = await fetch(this.feeds.freeBikeStatus.url);\n        freeBikeStatus = await freeBikeStatusResponse.json();\n      }\n      let vehicleTypes;\n      if (typeof this.feeds.vehicleTypes !== 'undefined') {\n        const vehicleTypesResponse = await fetch(this.feeds.vehicleTypes.url);\n        vehicleTypes = await vehicleTypesResponse.json();\n      }\n\n      this.container.clearLayers();\n\n      for (const status of stationStatus.data.stations) {\n        if (status.is_installed) {\n          let station = this.stations[status.station_id];\n          if (!station) {\n            /* eslint-disable no-await-in-loop */\n            if (typeof this.feeds.stationInformation.url === 'string') {\n              const stationInformationResponse = await fetch(this.feeds.stationInformation.url);\n              stations = await stationInformationResponse.json();\n            } else {\n              const stationInformationText = await this.feeds.stationInformation.text();\n              stations = JSON.parse(stationInformationText);\n            }\n            /* eslint-enable */\n            stations.data.stations.forEach((st) => {\n              this.stations[st.station_id] = st;\n            });\n            station = this.stations[status.station_id];\n          }\n          const icon = new DivIcon({\n            html: this.getStationIconHtml(status.num_bikes_available, status.num_docks_available),\n            bgPos: [16, 16],\n            iconSize: [32, 32],\n            popupAnchor: [0, -21],\n            className: 'station-icon',\n          });\n          const point = new LatLng(station.lat, station.lon);\n          const marker = new Marker(point, {\n            icon,\n          });\n          if (this.options.showStationPopup) {\n            marker.bindPopup(`<b>${station.name}</b><br>Available bikes: <b>${status.num_bikes_available}</b>`);\n          }\n          marker.on('click', (e) => this.fire('stationClick', { event: e, station, status }));\n          marker.addTo(this.container);\n        }\n      }\n\n      const icon = new Icon({\n        iconSize: [32, 32],\n        popupAnchor: [0, -20],\n        iconUrl,\n      });\n\n      if (typeof freeBikeStatus !== 'undefined') {\n        freeBikeStatus.data.bikes.forEach((bike) => {\n          const point = new LatLng(bike.lat, bike.lon);\n          const marker = new Marker(point, {\n            icon,\n          });\n          if (this.options.showBikePopup) {\n            marker.bindPopup('Bike available');\n          }\n          marker.on('click', (e) => this.fire('bikeClick', { event: e, bike }));\n          marker.addTo(this.container);\n        });\n      }\n\n      const dataUpdate = { stationStatus };\n      if (typeof stations !== 'undefined') dataUpdate.stations = stations;\n      if (typeof freeBikeStatus !== 'undefined') dataUpdate.freeBikeStatus = freeBikeStatus;\n      if (typeof vehicleTypes !== 'undefined') dataUpdate.vehicleTypes = vehicleTypes;\n      this.fire('data', dataUpdate);\n    } catch (err) {\n      this.updating = false;\n      console.warn(err);\n      this.fire('error', { error: err });\n    }\n\n    this.updating = false;\n    return this;\n  },\n\n  getBounds() {\n    if (this.container.getBounds) {\n      return this.container.getBounds();\n    }\n\n    throw new Error('Container has no getBounds method');\n  },\n\n  onAdd(map) {\n    map.addLayer(this.container);\n    if (this.options.start) {\n      this.start();\n    }\n  },\n\n  onRemove(map) {\n    if (this.options.onlyRunWhenAdded) {\n      this.stop();\n    }\n\n    map.removeLayer(this.container);\n  },\n\n  getStationIconHtml(bikes, docks) {\n    let stationCss = `background: ${this.options.stationMarkerBgColor};`;\n    if (bikes === 0) {\n      stationCss = `background: color-mix(in srgb, ${this.options.stationMarkerBgColor} 50%, transparent);`;\n    }\n    const degree = (bikes / (bikes + docks)) * 360;\n    let ringCss = `\n      background: ${this.options.bikeMarkerColor};\n      background-image:\n        linear-gradient(${90 + degree}deg, transparent 50%, ${this.options.bikeMarkerBgColor} 50%),\n        linear-gradient(90deg, ${this.options.bikeMarkerBgColor} 50%, transparent 50%);\n    `;\n\n    if (degree > 180) {\n      ringCss = `\n        background: ${this.options.bikeMarkerColor};\n        background-image:\n          linear-gradient(${degree - 90}deg, transparent 50%, ${this.options.bikeMarkerColor} 50%),\n          linear-gradient(90deg, ${this.options.bikeMarkerBgColor} 50%, transparent 50%);\n      `;\n    }\n    return `\n      <div class=\"station-icon-ring\" style=\"${ringCss}\">\n        <div class=\"station-icon-inner\" style=\"${stationCss}\">${bikes}</div>\n      </div>\n    `;\n  },\n});\n\nexport default GBFS;\n"],"names":["Symbol","iterator","_settle","pact","state","value","s","_Pact","o","bind","v","then","observer","prototype","onFulfilled","onRejected","result","this","callback","e","_this","_isSettledPact","thenable","iconUrl","URL","document","currentScript","src","_forOf","target","body","check","_iteratorSymbol","step","reject","_cycle","next","done","return","_fixup","TypeError","values","i","length","push","array","_forTo","recover","Layer","extend","options","gbfsURL","gbfsFiles","language","start","interval","onlyRunWhenAdded","bikeMarkerColor","bikeMarkerBgColor","stationMarkerBgColor","showStationPopup","showBikePopup","initialize","setOptions","container","GeoJSON","updating","fetch","gbfsResponse","json","gbfs","Object","hasOwnProperty","call","data","Error","languages","keys","feeds","systemInformation","find","el","name","url","systemInfoResponse","stationInformation","stationStatus","freeBikeStatus","stations","timer","setInterval","update","err","console","warn","fire","error","_exit","f","text","systemInfoText","JSON","parse","stop","clearTimeout","isRunning","undefined","isUpdating","_this2","icon","Icon","iconSize","popupAnchor","bikes","forEach","bike","point","LatLng","lat","lon","marker","Marker","bindPopup","on","event","addTo","dataUpdate","vehicleTypes","clearLayers","status","is_installed","DivIcon","html","getStationIconHtml","num_bikes_available","num_docks_available","bgPos","className","station","station_id","st","stationInformationResponse","stationInformationText","vehicleTypesResponse","freeBikeStatusResponse","stationStatusResponse","stationStatusText","getBounds","onAdd","map","addLayer","onRemove","removeLayer","docks","stationCss","degree","ringCss"],"mappings":"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"}